---
layout: post
comments: true
title:  "이펙티브 자바 3/E_제네릭"
date:   2019-10-12 22:00:00
author: Gongdel
categories: Book
tags:	 Java Book EffectiveJava
cover:  "/assets/instacode.png"
---
# 5장. 제네릭
## 26. 로 타입??(로 = raw)은 사용하지 말라.
### 핵심 정리
로 타입을 사용하면 런타임에 예외가 일어날 수 있으니 사용하면 안된다.
로 타입은 제네릭이 도입되기 이전 코드와의 호환성을 위해 제공될 뿐이다.
Set<Object>는 어떤 타입의 객체도 저장할 수 있는 매개변수화 타입이고,
Set<?>는 모종의 타입 객체만 저장할 수 있는 와일드카드 타입니다.
raw 타입인 Set은 제네릭 타입 시스템에 속하지 않는다.
Set<Object>, Set<?>는 안전하지만, raw 타입인 Set은 안전하다. 

## 27. 비검사 경고를 제거하라.
제네릭을 사용하기 시작하면 수많은 컴파일러 경고를 보게 될 것이다.(ex: 비검사 형변환 경고, 비검사 메서드 호출 경고 등)     
`할 수 있는 한 모든 비검사 경고를 제거하라!`
### 핵심 정리
비검사 경고는 중요하니 무시하지 말자. 모든 비검사 경고는 런타임에 ClassCastException을 일으킬 수 있는 잠재적 가능성을 뜻하니 최선을 다해 제거하라.  
경고를 없앨 방법을 찾지 못하겠다면, 그 코드가 타입 안전함을 증명하고 가능한 한 범위를 @SuppressWarnings("unchecked") 애너테이션으로 경고를 숨겨라. 그런 다음 경고를 숨기기로 한 근거를 주석으로 남겨라.

## 28. 배열보다는 리스트를 사용하라.
### 핵심 정리
배열과 제네릭에는 매우 다른 타입 규칙이 적용된다. 배열은 공변이고 실체화되는 반면, 제네릭은 불공변이고 타입 정보가 소거된다.  
그 결과 배열은 런타임에는 타입 안전하지만 컴파일 타임에는 그렇지 않다. 제네릭은 반대다. 그래서 둘을 섞어 쓰기란 쉽지 않다.  
둘을 섞어 쓰다가 컴파일 오류나 경고를 만나면, 가장 먼저 배열을 리스트로 대체하는 방법을 적용해보자.

+ 공변: Sub가 Super의 하위 타입이라면 배열 Sub[]는 Super[]의 하위 타입이 된다. 
	즉, 함께 변한다. 
+ 배열은 실체화된다?
	+ 배열은 런타임에도 자신이 담기로 한 원소의 타입을 인지하고 확인한다. 반면 제네릭은 타입 정보가 런타임에는 소거된다.

## 29. 이왕이면 제네릭 타입으로 만들라.
### 핵심 정리
클라이언트에서 직접 형변환해야 하는 타입보다 제네릭 타입이 더 안전하고 쓰기 편하다.  
그러니 새로운 타입을 설계할 때는 형변환 없이도 사용할 수 있도록 하라. 그렇게 하려면 제네릭 타입으로 만들어야 할 경우가 많다.  
기존 타입 중 제네릭이었어야 하는 게 있다면 제네릭 타입으로 변경하자. 기존 클라이언트에는 아무 영향을 주지 않으면서, 새로운 사용자를 훨씬 편하게 해주는 길이다.
